
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CentroMart-style eCommerce Templates — Demo</title>
  <style>
    /* --- Basic Reset & Utility --- */
    *{box-sizing:border-box;margin:0;padding:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    body{background:#fff;color:#222;line-height:1.4}
    a{text-decoration:none;color:inherit}
    .container{max-width:1200px;margin:0 auto;padding:16px}

    /* --- Topbar --- */
    header.topbar{background:#005a8b8b;color:#fff;padding:10px 0}
    .topbar .brand{font-weight:700;font-size:20px}
    .topbar .nav{display:flex;gap:12px;align-items:center}
    .topbar .nav button{background:transparent;border:1px solid rgba(255,255,255,0.18);color:#fff;padding:8px 12px;border-radius:6px}

    /* --- Grid / Layout --- */
    .row{display:flex;gap:16px}
    .col{flex:1}
    .aside{width:240px}

    /* --- Hero / banners --- */
    .hero{display:flex;gap:16px;align-items:center;margin:18px 0}
    .hero .banner{flex:1;border-radius:10px;overflow:hidden;min-height:160px;background:linear-gradient(90deg,#ffd9c1,#0077ff);display:flex;align-items:center;justify-content:center}
    .flash{background:#fff;padding:10px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.06)}

    /* --- Product grid --- */
    .products{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin:18px 0}
    .card{border:1px solid #eee;border-radius:12px;padding:12px;background:#fff}
    .card img{width:100%;height:160px;object-fit:cover;border-radius:8px}
    .card h4{margin:8px 0;font-size:16px}
    .price{font-weight:700;color:#0099ffe5}
    .muted{color:#666;font-size:13px}
    .btn{display:inline-block;padding:8px 12px;border-radius:8px;border:none;background:#00f2ff;color:#fff;font-weight:600;cursor:pointer}
    .btn.secondary{background:#333;color:#fff}

    /* --- Filters --- */
    .filter{background:#fafafa;padding:12px;border-radius:10px}
    .filter label{display:block;margin:6px 0;font-size:14px}
    .input, input, select{width:100%;padding:8px;border-radius:8px;border:1px solid #ddd}

    /* --- Modal --- */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.4);display:none;align-items:center;justify-content:center;padding:20px}
    .modal .panel{background:#fff;padding:18px;border-radius:12px;max-width:520px;width:100%}
    .modal.show{display:flex}

    /* --- Responsive --- */
    @media(max-width:900px){.row{flex-direction:column}.aside{width:auto}.hero{flex-direction:column}}

    /* --- Footer --- */
    footer{margin-top:30px;padding:18px 0;background:#fafafa;border-top:1px solid #eee}

    /* --- Small helpers --- */
    .center{text-align:center}
    .space{height:16px}
    .chip{display:inline-block;padding:6px 10px;border-radius:999px;background:#fff;border:1px solid #eee}

  </style>
</head>
<body>

  <!-- TOPBAR -->
  <header class="topbar">
    <div class="container row" style="align-items:center;justify-content:space-between">
      <div class="brand">CentroMart</div>
      <div class="nav">
        <div class="muted">Free delivery over KES 2,000</div>
        <button id="open-auth">Sign in / Register</button>
        <button id="open-cart">Cart (<span id="cart-count">0</span>)</button>
      </div>
    </div>
  </header>

  <main class="container">

    <!-- HERO + CATEGORIES -->
    <section class="hero">
      <div class="banner">
        <div style="padding:20px;text-align:center">
          <h1 style="font-size:24px;margin-bottom:6px">Big Savings — Daily Deals</h1>
          <p class="muted">Flash sales on electronics, fashion & more</p>
          <div class="space"></div>
          <button class="btn">Shop Deals</button>
        </div>
      </div>
      <aside class="flash">
        <h3 style="margin-bottom:8px">Featured Categories</h3>
        <div style="display:flex;flex-direction:column;gap:8px">
          <a class="chip" href="#" data-cat="electronics">Electronics</a>
          <a class="chip" href="#" data-cat="fashion">Fashion</a>
          <a class="chip" href="#" data-cat="home">Home</a>
          <a class="chip" href="#" data-cat="groceries">Groceries</a>
          <a class="chip" href="#" data-cat="sellers">Seller Center</a>
        </div>
      </aside>
    </section>

    <!-- LAYOUT: filters + products -->
    <section class="row">
      <aside class="aside">
        <div class="filter">
          <h4>Filter</h4>
          <label>Search</label>
          <input id="searchInput" class="input" placeholder="Search products..." />
          <label>Price</label>
          <select id="priceFilter">
            <option value="">All</option>
            <option value="under1000">Under KES 1,000</option>
            <option value="1000-5000">KES 1,000 - 5,000</option>
            <option value="5000-10000">KES 5,000-10,000</option>
            <option value="above10000">Above KES 10,000</option>
          </select>
          <div class="space"></div>
          <button id="clearFilters" class="btn secondary">Clear</button>
        </div>
      </aside>

      <div class="col">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <h2>Trending Products</h2>
          <div class="muted">Showing <span id="displayCount">0</span> items</div>
        </div>

        <div class="products" id="productsGrid">
          <!-- Product cards injected by JS -->
        </div>
      </div>
    </section>

    <footer>
      <div class="container row" style="justify-content:space-between;align-items:center">
        <div>
          <strong>CentroMart</strong>
          <div class="muted">Market — Electronics, Fashion, Home & More</div>
        </div>
        <div class="muted">© <span id="year"></span> CentroMart. All rights reserved.</div>
      </div>
    </footer>

  </main>

  <!-- PRODUCT TEMPLATE (SINGLE PAGE) -->
  <section id="product-page" style="display:none;padding:22px;max-width:1000px;margin:0 auto">
    <button id="backToHome" class="btn secondary">← Back</button>
    <div class="space"></div>
    <div class="row">
      <div style="flex:1">
        <img id="productImageLarge" src="" alt="product" style="width:100%;max-height:480px;object-fit:cover;border-radius:8px" />
      </div>
      <div style="width:420px">
        <h2 id="productTitle">Product Title</h2>
        <div class="muted" id="productSeller">Sold by SellerName</div>
        <div class="space"></div>
        <div class="price" id="productPrice">KES 0</div>
        <div class="space"></div>
        <p id="productDesc" class="muted">Product description goes here.</p>
        <div class="space"></div>
        <button id="addToCartBtn" class="btn">Add to Cart</button>
      </div>
    </div>
  </section>

  <!-- SELLER CENTER PAGE (SIMPLE) -->
  <section id="seller-center" style="display:none;padding:22px;max-width:900px;margin:0 auto">
    <button id="backFromSeller" class="btn secondary">← Back</button>
    <h2>Seller Center — Register as a Vendor</h2>
    <p class="muted">Create an account to list products, manage orders and track sales.</p>
    <div class="space"></div>
    <div class="card">
      <label>Shop Name</label>
      <input id="shopName" />
      <label>Contact email</label>
      <input id="shopEmail" />
      <label>Short description</label>
      <input id="shopDesc" />
      <div class="space"></div>
      <button id="registerSeller" class="btn">Register Shop</button>
    </div>
  </section>

  <!-- CART & AUTH MODALS -->
  <div id="cartModal" class="modal">
    <div class="panel">
      <h3>Your Cart</h3>
      <div id="cartItems"></div>
      <div class="space"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end">
        <button class="btn secondary" id="closeCart">Close</button>
        <button class="btn" id="checkoutBtn">Checkout</button>
      </div>
    </div>
  </div>

  <div id="authModal" class="modal">
    <div class="panel">
      <h3 id="authTitle">Sign In / Register</h3>
      <div id="authForms">
        <div id="registerForm">
          <label>Email</label>
          <input id="regEmail" placeholder="you@example.com" />
          <label>Password</label>
          <input id="regPass" type="password" />
          <div class="space"></div>
          <button id="doRegister" class="btn">Register</button>
          <div class="space"></div>
          <div class="muted">Already have an account? <a href="#" id="showLogin">Sign in</a></div>
        </div>

        <div id="loginForm" style="display:none">
          <label>Email</label>
          <input id="loginEmail" />
          <label>Password</label>
          <input id="loginPass" type="password" />
          <div class="space"></div>
          <button id="doLogin" class="btn">Sign in</button>
          <div class="space"></div>
          <div class="muted">Don't have an account? <a href="#" id="showRegister">Register</a></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --- Demo data ---
    const products = [
      {id:1,title:'Infinix GT Pro - 8GB / 256GB',price:39999,img:'https://picsum.photos/seed/p1/600/400',cat:'electronics',seller:'InfiShop',desc:'Powerful phone for gamers.'},
      {id:2,title:'Nothing Phone 2 - 8GB',price:52999,img:'https://picsum.photos/seed/p2/600/400',cat:'electronics',seller:'GadgetWorld',desc:'Sleek design and smooth UI.'},
      {id:3,title:'Running Shoes - SportX',price:4999,img:'https://picsum.photos/seed/p3/600/400',cat:'fashion',seller:'ShoeHub',desc:'Comfortable running shoes.'},
      {id:4,title:'Electric Kettle 1.7L',price:2499,img:'https://picsum.photos/seed/p4/600/400',cat:'home',seller:'Homeess',desc:'Fast boil kettle.'},
      {id:5,title:'Smart TV 43"',price:45999,img:'https://picsum.photos/seed/p5/600/400',cat:'electronics',seller:'ScreenStore',desc:'Crisp 4K display.'}
    ];

    // --- Utilities ---
    const $ = id => document.getElementById(id);
    const qs = sel => document.querySelector(sel);

    // --- Render products ---
    function renderProducts(list){
      const grid = $('productsGrid'); grid.innerHTML = '';
      list.forEach(p => {
        const div = document.createElement('div'); div.className='card';
        div.innerHTML = `
          <img src="${p.img}" alt="${p.title}" />
          <h4>${p.title}</h4>
          <div class=\"muted\">${p.seller}</div>
          <div class=\"price\">KES ${p.price.toLocaleString()}</div>
          <div class=\"space\"></div>
          <div style=\"display:flex;gap:8px;\">
            <button class=\"btn\" onclick=\"openProduct(${p.id})\">View</button>
            <button class=\"btn secondary\" onclick=\"addToCart(${p.id})\">Add</button>
          </div>
        `;
        grid.appendChild(div);
      });
      $('displayCount').innerText = list.length;
    }

    // --- Simple search & filter ---
    $('searchInput').addEventListener('input', e=>{
      applyFilters();
    });
    $('priceFilter').addEventListener('change', applyFilters);
    $('clearFilters').addEventListener('click', ()=>{ $('searchInput').value=''; $('priceFilter').value=''; applyFilters(); });

    function applyFilters(){
      const q = $('searchInput').value.toLowerCase();
      const price = $('priceFilter').value;
      let list = products.filter(p => p.title.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q));
      if(price==='under1000') list = list.filter(p => p.price < 1000);
      if(price==='1000-5000') list = list.filter(p => p.price >=1000 && p.price <5000);
      if(price==='5000-10000') list = list.filter(p => p.price >=5000 && p.price <10000);
      if(price==='over10000') list = list.filter(p=> p.price >=10000);
      renderProducts(list);
    }

    // --- Product page logic ---
    function openProduct(id){
      const p = products.find(x=>x.id===id); if(!p) return;
      document.querySelector('main').style.display='none';
      $('product-page').style.display='block';
      $('productImageLarge').src=p.img; $('productTitle').innerText=p.title; $('productPrice').innerText='KES '+p.price.toLocaleString(); $('productDesc').innerText=p.desc; $('productSeller').innerText='Sold by '+p.seller;
      $('addToCartBtn').onclick = ()=>{ addToCart(id); alert('Added to cart'); };
    }
    $('backToHome').addEventListener('click', ()=>{ $('product-page').style.display='none'; document.querySelector('main').style.display='block'; });

    // --- Cart (localStorage demo) ---
    function getCart(){ return JSON.parse(localStorage.getItem('demo_cart')||'[]'); }
    function saveCart(c){ localStorage.setItem('demo_cart',JSON.stringify(c)); updateCartCount(); }
    function addToCart(id){ const cart = getCart(); const item = cart.find(i=>i.id===id); if(item) item.qty++; else cart.push({id,qty:1}); saveCart(cart); }
    function updateCartCount(){ const count = getCart().reduce((s,i)=>s+i.qty,0); $('cart-count').innerText = count; }
    function renderCartModal(){ const list = getCart(); const cont = $('cartItems'); cont.innerHTML=''; if(list.length===0){ cont.innerHTML='<div class="muted">Cart is empty</div>'; return; }
      list.forEach(ci=>{ const p = products.find(x=>x.id===ci.id); const el = document.createElement('div'); el.style.display='flex'; el.style.justifyContent='space-between'; el.style.padding='8px 0'; el.innerHTML = `<div>${p.title} <div class='muted'>KES ${p.price.toLocaleString()} x ${ci.qty}</div></div><div>KES ${ (p.price*ci.qty).toLocaleString() }</div>`; cont.appendChild(el); });
    }

    // --- Cart modal events ---
    $('open-cart').addEventListener('click', ()=>{ renderCartModal(); $('cartModal').classList.add('show'); });
    $('closeCart').addEventListener('click', ()=>$('cartModal').classList.remove('show'));
    $('checkoutBtn').addEventListener('click', ()=>{
      alert('M‑Pesa STK Push (demo) — integrate Safaricom Daraja API on your backend — integrate payment gateway on your backend.');
    });

    // --- Auth modal demo (email signup) ---
    function getUsers(){ return JSON.parse(localStorage.getItem('demo_users')||'[]'); }
    function saveUsers(u){ localStorage.setItem('demo_users',JSON.stringify(u)); }
    function setLogged(email){ localStorage.setItem('demo_logged', email); updateAuthState(); }
    function updateAuthState(){ const e = localStorage.getItem('demo_logged'); if(e){ document.querySelector('.topbar .nav').querySelectorAll('button')[0].innerText = 'Account'; } else { document.querySelector('.topbar .nav').querySelectorAll('button')[0].innerText = 'Sign in / Register'; }}

    $('open-auth').addEventListener('click', ()=>{ $('authModal').classList.add('show'); });
    $('doRegister').addEventListener('click', ()=>{
      const email = $('regEmail').value.trim(); const pass = $('regPass').value.trim(); if(!email||!pass){alert('Enter email & password');return}
      const users = getUsers(); if(users.find(u=>u.email===email)){ alert('Email already registered'); return }
      users.push({email,pass}); saveUsers(users); setLogged(email); alert('Registered — demo only'); $('authModal').classList.remove('show');
    });
    $('doLogin').addEventListener('click', ()=>{
      const email = $('loginEmail').value.trim(); const pass = $('loginPass').value.trim(); const users = getUsers(); const u = users.find(x=>x.email===email && x.pass===pass); if(!u){ alert('Invalid credentials (demo)'); return } setLogged(email); alert('Signed in (demo)'); $('authModal').classList.remove('show');
    });
    $('showLogin').addEventListener('click', ()=>{ $('registerForm').style.display='none'; $('loginForm').style.display='block'; });
    $('showRegister').addEventListener('click', ()=>{ $('loginForm').style.display='none'; $('registerForm').style.display='block'; });

    // --- Seller center ---
    $('registerSeller').addEventListener('click', ()=>{
      const shop = $('shopName').value.trim(); const email = $('shopEmail').value.trim(); if(!shop||!email){ alert('Enter shop name and email'); return }
      alert('Seller registered (demo). Save details to your backend to persist.');
      $('seller-center').style.display='none'; document.querySelector('main').style.display='block';
    });

    // --- Navigation hooks for categories & seller center ---
    document.querySelectorAll('.chip[data-cat]').forEach(el=>el.addEventListener('click', (e)=>{
      const c = el.dataset.cat;
      if(c==='sellers'){ document.querySelector('main').style.display='none'; $('seller-center').style.display='block'; }
      else{ $('searchInput').value = c; applyFilters(); window.scrollTo({top:200,behavior:'smooth'}); }
    }));
    document.querySelectorAll('.topbar .nav button')[0].addEventListener('click', ()=>{ const e = localStorage.getItem('demo_logged'); if(e){ alert('Account page placeholder — '+e); } else { $('authModal').classList.add('show'); } });

    // --- Back from seller center ---
    $('backFromSeller').addEventListener('click', ()=>{ $('seller-center').style.display='none'; document.querySelector('main').style.display='block'; });

    // --- Misc init ---
    document.getElementById('year').innerText = new Date().getFullYear(); renderProducts(products); updateCartCount(); updateAuthState();

  // --- M‑Pesa STK Push Demo Button (Frontend Trigger) ---
    // This only CALLS your backend. Real STK Push happens server-side.
    function triggerMpesa(){
      const phone = prompt('Enter your M‑Pesa phone number (07XXXXXXXX):');
      if(!phone) return;
      alert('Sending STK Push… (demo)');
      /*
        In production, send fetch() request:

        fetch('/mpesa/stk', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ phone, amount: 1000 })
        })
        .then(r=>r.json())
        .then(res=> alert(res.message))
        .catch(()=> alert('Error sending STK Push'));

        Backend must implement Safaricom Daraja API STK Push.
      */
    }

            //  Mpesa option
    $('checkoutBtn').onclick = ()=>{
      const useMpesa = confirm('Pay with M‑Pesa? Click OK for M‑Pesa, Cancel for other options.');
      if(useMpesa) triggerMpesa(); else alert('Other payment gateways placeholder');
    };

  </script>

  

  <!-- ===================== CHECKOUT UI SECTION ===================== -->
  <section id="checkout-section" style="padding:20px; max-width:600px; margin:auto; background:#fff; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,0.1);">
    <h2 style="margin-bottom:15px;">Checkout</h2>

    <!-- Shipping Info -->
    <div style="margin-bottom:20px;">
      <h3>Shipping Information</h3>
      <input type="text" placeholder="Full Name" style="width:100%; padding:10px; margin:8px 0;">
      <input type="text" placeholder="Phone Number" style="width:100%; padding:10px; margin:8px 0;">
      <input type="text" placeholder="Delivery Address" style="width:100%; padding:10px; margin:8px 0;">
    </div>

    <!-- Payment Methods -->
    <div style="margin-bottom:20px;">
      <h3>Select Payment Method</h3>

      <label style="display:flex; align-items:center; gap:10px; margin:8px 0; cursor:pointer;">
        <input type="radio" name="payment" value="mpesa"> 
        <span>M-Pesa</span>
      </label>

      <label style="display:flex; align-items:center; gap:10px; margin:8px 0; cursor:pointer;">
        <input type="radio" name="payment" value="card"> 
        <span>Credit/Debit Card</span>
      </label>

      <label style="display:flex; align-items:center; gap:10px; margin:8px 0; cursor:pointer;">
        <input type="radio" name="payment" value="paypal"> 
        <span>PayPal</span>
      </label>
    </div>

    <!-- Order Summary -->
    <div style="margin-bottom:20px;">
      <h3>Order Summary</h3>
      <p>Items Total: <strong>KES 1,000</strong></p>
      <p>Delivery Fee: <strong>KES 150</strong></p>
      <p>Total: <strong>KES 1,150</strong></p>
    </div>

    <!-- Pay Button -->
    <button onclick="processPayment()" style="width:100%; padding:12px; background:#4a18b7; color:white; border:none; border-radius:8px; font-size:18px; cursor:pointer;">
      Pay Now
    </button>
  </section>

<script>
  function processPayment(){
    const method = document.querySelector('input[name="payment"]:checked');
    if(!method){ alert('Please select a payment method.'); return; }

    if(method.value === 'mpesa'){
      triggerMpesa();
    }
    else if(method.value === 'card'){
      alert('Redirecting to secure Card Payment Gateway...');
    }
    else if(method.value === 'paypal'){
      alert('Redirecting to PayPal Checkout...');
    }
  }
</script>

</body>
</html>
